<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaLearn - Download Questions</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preload" href="/css/style.css" as="style">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/pages/download.css?v=5">
</head>
<body data-view="student" data-active="download">
<div class="layout">
    <nav class="sidebar" id="sidebar"></nav>
    <main class="main-content">

        <!-- Header -->
        <div class="dl-header">
            <h1><i class="fa-solid fa-download" style="color:var(--color-primary);margin-right:8px;font-size:1.3rem"></i> Download AP Content</h1>
            <p>Select an AP course to extract and download all videos, articles, and questions organized by unit and lesson.</p>
        </div>

        <!-- Course selector -->
        <div id="courses-loading" class="dl-loading">
            <span class="spinner" style="width:20px;height:20px;border:2.5px solid var(--color-border);border-top-color:var(--color-primary);border-radius:50%;animation:spin .6s linear infinite;display:inline-block"></span>
            Loading AP courses...
        </div>
        <div class="dl-courses" id="courses-grid" style="display:none"></div>

        <!-- Actions -->
        <div class="dl-actions" id="actions-bar" style="display:none">
            <button class="dl-btn dl-btn-primary" id="btn-extract" disabled onclick="extractContent()">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Extract Content
            </button>
            <button class="dl-btn dl-btn-secondary" id="btn-download" disabled onclick="downloadZIP()">
                <i class="fa-solid fa-file-arrow-down"></i> Download ZIP
            </button>
            <span class="dl-status" id="status-text"></span>
        </div>

        <!-- Progress bar -->
        <div class="dl-progress" id="progress-bar">
            <div class="dl-progress-bar-wrap"><div class="dl-progress-bar" id="progress-fill"></div></div>
            <div class="dl-progress-info">
                <span class="dl-progress-stage" id="progress-stage"><span class="spinner"></span> Starting...</span>
                <span class="dl-progress-pct" id="progress-pct">0%</span>
            </div>
        </div>

        <!-- Results -->
        <div class="dl-results" id="results" style="display:none"></div>

        <!-- Empty state (shown when no AP courses found) -->
        <div class="dl-empty" id="empty-state" style="display:none">
            <i class="fa-solid fa-book-open"></i>
            <p>No AP courses found in this organization.</p>
        </div>

    </main>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="/js/layout.js?v=5"></script>
    <script src="/js/notifications.js?v=5"></script>
<script src="/js/app.js?v=5"></script>
    <script src="/js/pages/download.js?v=5"></script>
</body>
</html>
