        /* ---- Page-specific styles ---- */
        .dl-header { margin-bottom: 28px; }
        .dl-header h1 { font-size: 1.6rem; font-weight: 800; color: var(--color-text); margin-bottom: 6px; }
        .dl-header p { font-size: 0.88rem; color: var(--color-text-secondary); line-height: 1.5; }

        /* ---- Course selector ---- */
        .dl-courses { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-bottom: 32px; }
        .dl-course-card {
            background: var(--color-surface); border-radius: 14px; padding: 20px;
            box-shadow: var(--shadow); cursor: pointer; transition: all 0.2s ease;
            border: 2px solid transparent; position: relative;
        }
        .dl-course-card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }
        .dl-course-card.selected { border-color: var(--color-primary); background: var(--color-primary-light); }
        .dl-course-card .cc-icon { width: 40px; height: 40px; border-radius: 10px; background: var(--color-primary-light); color: var(--color-primary); display: flex; align-items: center; justify-content: center; font-size: 1.1rem; margin-bottom: 12px; }
        .dl-course-card.selected .cc-icon { background: var(--color-primary); color: #fff; }
        .dl-course-card .cc-title { font-weight: 700; font-size: 0.95rem; color: var(--color-text); line-height: 1.35; }
        .dl-course-card .cc-meta { font-size: 0.78rem; color: var(--color-text-muted); margin-top: 6px; }

        /* ---- Action bar ---- */
        .dl-actions { display: flex; gap: 12px; align-items: center; margin-bottom: 28px; flex-wrap: wrap; }
        .dl-btn {
            padding: 11px 22px; border-radius: 10px; font-weight: 600; font-size: 0.88rem;
            border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
            transition: all 0.15s;
        }
        .dl-btn-primary { background: var(--color-primary); color: #fff; }
        .dl-btn-primary:hover { background: var(--color-primary-dark); }
        .dl-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
        .dl-btn-secondary { background: var(--color-surface); color: var(--color-text); border: 1.5px solid var(--color-border); }
        .dl-btn-secondary:hover { background: var(--color-bg); }
        .dl-btn-secondary:disabled { opacity: 0.4; cursor: not-allowed; }
        .dl-status { font-size: 0.82rem; color: var(--color-text-secondary); display: flex; align-items: center; gap: 6px; }
        .dl-status .spinner { display: inline-block; width: 16px; height: 16px; border: 2px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 0.6s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ---- Results tree ---- */
        .dl-results { margin-top: 8px; }
        .dl-summary {
            background: var(--color-surface); border-radius: 14px; padding: 20px 24px;
            box-shadow: var(--shadow); margin-bottom: 20px; display: flex; gap: 24px; flex-wrap: wrap;
        }
        .dl-stat { text-align: center; }
        .dl-stat-val { font-size: 1.6rem; font-weight: 800; color: var(--color-primary); }
        .dl-stat-label { font-size: 0.72rem; font-weight: 600; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }

        .dl-unit {
            background: var(--color-surface); border-radius: 14px;
            box-shadow: var(--shadow); margin-bottom: 14px; overflow: hidden;
        }
        .dl-unit-header {
            padding: 16px 20px; display: flex; align-items: center; gap: 12px;
            cursor: pointer; user-select: none; transition: background 0.15s;
        }
        .dl-unit-header:hover { background: var(--color-bg); }
        .dl-unit-header .chevron { font-size: 0.75rem; color: var(--color-text-muted); transition: transform 0.2s; }
        .dl-unit.open .dl-unit-header .chevron { transform: rotate(90deg); }
        .dl-unit-header .unit-title { font-weight: 700; font-size: 0.95rem; flex: 1; }
        .dl-unit-header .unit-badge { font-size: 0.72rem; font-weight: 600; background: var(--color-primary-light); color: var(--color-primary-dark); padding: 3px 10px; border-radius: 20px; }
        .dl-unit-body { display: none; border-top: 1px solid var(--color-border); }
        .dl-unit.open .dl-unit-body { display: block; }

        .dl-lesson {
            border-bottom: 1px solid var(--color-border); padding: 0;
        }
        .dl-lesson:last-child { border-bottom: none; }
        .dl-lesson-header {
            padding: 12px 20px 12px 36px; display: flex; align-items: center; gap: 10px;
            cursor: pointer; user-select: none; transition: background 0.15s;
        }
        .dl-lesson-header:hover { background: #FAFBFC; }
        .dl-lesson-header .chevron { font-size: 0.65rem; color: var(--color-text-muted); transition: transform 0.2s; }
        .dl-lesson.open .dl-lesson-header .chevron { transform: rotate(90deg); }
        .dl-lesson-header .lesson-title { font-weight: 600; font-size: 0.88rem; color: var(--color-text-secondary); flex: 1; }
        .dl-lesson-header .lesson-badge { font-size: 0.7rem; font-weight: 600; background: #F0F4F8; color: var(--color-text-muted); padding: 2px 8px; border-radius: 12px; }
        .dl-lesson-body { display: none; padding: 0 20px 16px 52px; }
        .dl-lesson.open .dl-lesson-body { display: block; }

        .dl-question {
            background: var(--color-bg); border-radius: 10px; padding: 14px 16px;
            margin-bottom: 10px; font-size: 0.84rem; line-height: 1.55;
        }
        .dl-question:last-child { margin-bottom: 0; }
        .dl-q-num { font-weight: 700; color: var(--color-primary); margin-right: 6px; }
        .dl-q-type { display: inline-block; font-size: 0.68rem; font-weight: 700; padding: 2px 7px; border-radius: 6px; margin-left: 8px; vertical-align: middle; }
        .dl-q-type.mcq { background: #E3F2FD; color: #1565C0; }
        .dl-q-type.frq { background: #FFF3E0; color: #E65100; }
        .dl-q-prompt { margin-top: 6px; color: var(--color-text); }
        .dl-q-stimulus { margin-top: 6px; padding: 8px 12px; background: #F8F5FF; border-left: 3px solid var(--color-purple); border-radius: 0 8px 8px 0; font-size: 0.8rem; color: var(--color-text-secondary); }
        .dl-q-choices { margin-top: 8px; padding-left: 4px; }
        .dl-q-choice { display: flex; align-items: flex-start; gap: 8px; padding: 4px 0; font-size: 0.82rem; color: var(--color-text-secondary); }
        .dl-q-choice .choice-id { font-weight: 700; color: var(--color-text-muted); min-width: 20px; }
        .dl-q-choice.correct { color: #2E7D32; font-weight: 600; }
        .dl-q-choice.correct .choice-id { color: #2E7D32; }

        /* ---- Video card ---- */
        .dl-video {
            background: #EFF6FF; border-radius: 10px; padding: 12px 16px;
            margin-bottom: 10px; display: flex; align-items: center; gap: 12px; font-size: 0.84rem;
        }
        .dl-video-icon { width: 36px; height: 36px; border-radius: 8px; background: #DBEAFE; color: #2563EB; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; flex-shrink: 0; }
        .dl-video-info { flex: 1; min-width: 0; }
        .dl-video-title { font-weight: 600; color: var(--color-text); margin-bottom: 2px; }
        .dl-video-link { font-size: 0.78rem; color: #2563EB; word-break: break-all; }
        .dl-video-link a { color: #2563EB; text-decoration: underline; }

        /* ---- Article card ---- */
        .dl-article {
            background: #FFF7ED; border-radius: 10px; padding: 14px 16px;
            margin-bottom: 10px; font-size: 0.84rem; line-height: 1.55;
        }
        .dl-article-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .dl-article-icon { width: 30px; height: 30px; border-radius: 7px; background: #FFEDD5; color: #C2410C; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; flex-shrink: 0; }
        .dl-article-title { font-weight: 600; color: var(--color-text); }
        .dl-article-url { font-size: 0.75rem; color: #C2410C; word-break: break-all; }
        .dl-article-url a { color: #C2410C; text-decoration: underline; }
        .dl-article-content { color: var(--color-text-secondary); font-size: 0.82rem; margin-top: 6px; max-height: 150px; overflow: hidden; position: relative; }
        .dl-article-content.expanded { max-height: none; }
        .dl-article-toggle { font-size: 0.78rem; color: var(--color-primary); cursor: pointer; margin-top: 4px; font-weight: 600; border: none; background: none; padding: 0; }

        /* ---- Section label inside lesson ---- */
        .dl-section-label { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.6px; color: var(--color-text-muted); margin: 14px 0 8px; padding-bottom: 4px; border-bottom: 1px solid var(--color-border); display: flex; align-items: center; gap: 6px; }
        .dl-section-label:first-child { margin-top: 0; }
        .dl-section-label i { font-size: 0.65rem; }

        /* ---- Empty state ---- */
        .dl-empty { text-align: center; padding: 60px 20px; color: var(--color-text-muted); }
        .dl-empty i { font-size: 2.5rem; margin-bottom: 16px; display: block; opacity: 0.3; }
        .dl-empty p { font-size: 0.92rem; }

        /* ---- Progress bar ---- */
        .dl-progress { margin-bottom: 24px; display: none; }
        .dl-progress.active { display: block; }
        .dl-progress-bar-wrap {
            background: var(--color-border); border-radius: 8px; height: 10px;
            overflow: hidden; margin-bottom: 10px;
        }
        .dl-progress-bar {
            height: 100%; background: linear-gradient(90deg, var(--color-primary), var(--color-primary-dark));
            border-radius: 8px; width: 0%; transition: width 0.4s ease;
        }
        .dl-progress-info { display: flex; justify-content: space-between; align-items: center; }
        .dl-progress-stage {
            font-size: 0.82rem; font-weight: 600; color: var(--color-text-secondary);
            display: flex; align-items: center; gap: 8px;
        }
        .dl-progress-stage .spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 0.6s linear infinite; }
        .dl-progress-pct { font-size: 0.78rem; font-weight: 700; color: var(--color-primary); }

        /* ---- Loading skeleton ---- */
        .dl-loading { display: flex; align-items: center; gap: 10px; padding: 40px 0; justify-content: center; color: var(--color-text-secondary); font-size: 0.9rem; }

        @media (max-width: 768px) {
            .dl-courses { grid-template-columns: 1fr; }
            .dl-summary { gap: 16px; }
            .dl-lesson-header { padding-left: 24px; }
            .dl-lesson-body { padding-left: 36px; }
        }
    